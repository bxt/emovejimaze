(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))_(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&_(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function _(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var J,h,be,S,re,j={},ge=[],Ae=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function x(t,e){for(var n in e)t[n]=e[n];return t}function ye(t){var e=t.parentNode;e&&e.removeChild(t)}function Re(t,e,n){var _,i,o,l={};for(o in e)o=="key"?_=e[o]:o=="ref"?i=e[o]:l[o]=e[o];if(arguments.length>2&&(l.children=arguments.length>3?J.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)l[o]===void 0&&(l[o]=t.defaultProps[o]);return O(t,l,_,i,null)}function O(t,e,n,_,i){var o={type:t,props:e,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++be:i};return i==null&&h.vnode!=null&&h.vnode(o),o}function D(t){return t.children}function I(t,e){this.props=t,this.context=e}function L(t,e){if(e==null)return t.__?L(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?L(t):null}function Fe(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Fe(t)}}function oe(t){(!t.__d&&(t.__d=!0)&&S.push(t)&&!q.__r++||re!==h.debounceRendering)&&((re=h.debounceRendering)||setTimeout)(q)}function q(){for(var t;q.__r=S.length;)t=S.sort(function(e,n){return e.__v.__b-n.__v.__b}),S=[],t.some(function(e){var n,_,i,o,l,d;e.__d&&(l=(o=(n=e).__v).__e,(d=n.__P)&&(_=[],(i=x({},o)).__v=o.__v+1,ee(d,o,i,n.__n,d.ownerSVGElement!==void 0,o.__h!=null?[l]:null,_,l==null?L(o):l,o.__h),$e(_,o),o.__e!=l&&Fe(o)))})}function ke(t,e,n,_,i,o,l,d,p,v){var r,g,m,u,b,T,y,k=_&&_.__k||ge,w=k.length;for(n.__k=[],r=0;r<e.length;r++)if((u=n.__k[r]=(u=e[r])==null||typeof u=="boolean"?null:typeof u=="string"||typeof u=="number"||typeof u=="bigint"?O(null,u,null,null,u):Array.isArray(u)?O(D,{children:u},null,null,null):u.__b>0?O(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):u)!=null){if(u.__=n,u.__b=n.__b+1,(m=k[r])===null||m&&u.key==m.key&&u.type===m.type)k[r]=void 0;else for(g=0;g<w;g++){if((m=k[g])&&u.key==m.key&&u.type===m.type){k[g]=void 0;break}m=null}ee(t,u,m=m||j,i,o,l,d,p,v),b=u.__e,(g=u.ref)&&m.ref!=g&&(y||(y=[]),m.ref&&y.push(m.ref,null,u),y.push(g,u.__c||b,u)),b!=null?(T==null&&(T=b),typeof u.type=="function"&&u.__k===m.__k?u.__d=p=Ce(u,p,t):p=we(t,u,m,k,b,p),typeof n.type=="function"&&(n.__d=p)):p&&m.__e==p&&p.parentNode!=t&&(p=L(m))}for(n.__e=T,r=w;r--;)k[r]!=null&&De(k[r],k[r]);if(y)for(r=0;r<y.length;r++)Te(y[r],y[++r],y[++r])}function Ce(t,e,n){for(var _,i=t.__k,o=0;i&&o<i.length;o++)(_=i[o])&&(_.__=t,e=typeof _.type=="function"?Ce(_,e,n):we(n,_,_,i,_.__e,e));return e}function we(t,e,n,_,i,o){var l,d,p;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(n==null||i!=o||i.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(i),l=null;else{for(d=o,p=0;(d=d.nextSibling)&&p<_.length;p+=1)if(d==i)break e;t.insertBefore(i,o),l=o}return l!==void 0?l:i.nextSibling}function Ne(t,e,n,_,i){var o;for(o in n)o==="children"||o==="key"||o in e||z(t,o,null,n[o],_);for(o in e)i&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===e[o]||z(t,o,e[o],n[o],_)}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=n==null?"":typeof n!="number"||Ae.test(e)?n:n+"px"}function z(t,e,n,_,i){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof _=="string"&&(t.style.cssText=_=""),_)for(e in _)n&&e in n||_e(t.style,e,"");if(n)for(e in n)_&&n[e]===_[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?_||t.addEventListener(e,o?le:ie,o):t.removeEventListener(e,o?le:ie,o);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n==null?"":n;break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function ie(t){this.l[t.type+!1](h.event?h.event(t):t)}function le(t){this.l[t.type+!0](h.event?h.event(t):t)}function ee(t,e,n,_,i,o,l,d,p){var v,r,g,m,u,b,T,y,k,w,E,$,A,f,c,a=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(p=n.__h,d=e.__e=n.__e,e.__h=null,o=[d]),(v=h.__b)&&v(e);try{e:if(typeof a=="function"){if(y=e.props,k=(v=a.contextType)&&_[v.__c],w=v?k?k.props.value:v.__:_,n.__c?T=(r=e.__c=n.__c).__=r.__E:("prototype"in a&&a.prototype.render?e.__c=r=new a(y,w):(e.__c=r=new I(y,w),r.constructor=a,r.render=Le),k&&k.sub(r),r.props=y,r.state||(r.state={}),r.context=w,r.__n=_,g=r.__d=!0,r.__h=[],r._sb=[]),r.__s==null&&(r.__s=r.state),a.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=x({},r.__s)),x(r.__s,a.getDerivedStateFromProps(y,r.__s))),m=r.props,u=r.state,g)a.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(a.getDerivedStateFromProps==null&&y!==m&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(y,w),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(y,r.__s,w)===!1||e.__v===n.__v){for(r.props=y,r.state=r.__s,e.__v!==n.__v&&(r.__d=!1),r.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(F){F&&(F.__=e)}),E=0;E<r._sb.length;E++)r.__h.push(r._sb[E]);r._sb=[],r.__h.length&&l.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(y,r.__s,w),r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(m,u,b)})}if(r.context=w,r.props=y,r.__v=e,r.__P=t,$=h.__r,A=0,"prototype"in a&&a.prototype.render){for(r.state=r.__s,r.__d=!1,$&&$(e),v=r.render(r.props,r.state,r.context),f=0;f<r._sb.length;f++)r.__h.push(r._sb[f]);r._sb=[]}else do r.__d=!1,$&&$(e),v=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++A<25);r.state=r.__s,r.getChildContext!=null&&(_=x(x({},_),r.getChildContext())),g||r.getSnapshotBeforeUpdate==null||(b=r.getSnapshotBeforeUpdate(m,u)),c=v!=null&&v.type===D&&v.key==null?v.props.children:v,ke(t,Array.isArray(c)?c:[c],e,n,_,i,o,l,d,p),r.base=e.__e,e.__h=null,r.__h.length&&l.push(r),T&&(r.__E=r.__=null),r.__e=!1}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Se(n.__e,e,n,_,i,o,l,p);(v=h.diffed)&&v(e)}catch(F){e.__v=null,(p||o!=null)&&(e.__e=d,e.__h=!!p,o[o.indexOf(d)]=null),h.__e(F,e,n)}}function $e(t,e){h.__c&&h.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(_){_.call(n)})}catch(_){h.__e(_,n.__v)}})}function Se(t,e,n,_,i,o,l,d){var p,v,r,g=n.props,m=e.props,u=e.type,b=0;if(u==="svg"&&(i=!0),o!=null){for(;b<o.length;b++)if((p=o[b])&&"setAttribute"in p==!!u&&(u?p.localName===u:p.nodeType===3)){t=p,o[b]=null;break}}if(t==null){if(u===null)return document.createTextNode(m);t=i?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u,m.is&&m),o=null,d=!1}if(u===null)g===m||d&&t.data===m||(t.data=m);else{if(o=o&&J.call(t.childNodes),v=(g=n.props||j).dangerouslySetInnerHTML,r=m.dangerouslySetInnerHTML,!d){if(o!=null)for(g={},b=0;b<t.attributes.length;b++)g[t.attributes[b].name]=t.attributes[b].value;(r||v)&&(r&&(v&&r.__html==v.__html||r.__html===t.innerHTML)||(t.innerHTML=r&&r.__html||""))}if(Ne(t,m,g,i,d),r)e.__k=[];else if(b=e.props.children,ke(t,Array.isArray(b)?b:[b],e,n,_,i&&u!=="foreignObject",o,l,o?o[0]:n.__k&&L(n,0),d),o!=null)for(b=o.length;b--;)o[b]!=null&&ye(o[b]);d||("value"in m&&(b=m.value)!==void 0&&(b!==t.value||u==="progress"&&!b||u==="option"&&b!==g.value)&&z(t,"value",b,g.value,!1),"checked"in m&&(b=m.checked)!==void 0&&b!==t.checked&&z(t,"checked",b,g.checked,!1))}return t}function Te(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(_){h.__e(_,n)}}function De(t,e,n){var _,i;if(h.unmount&&h.unmount(t),(_=t.ref)&&(_.current&&_.current!==t.__e||Te(_,null,e)),(_=t.__c)!=null){if(_.componentWillUnmount)try{_.componentWillUnmount()}catch(o){h.__e(o,e)}_.base=_.__P=null,t.__c=void 0}if(_=t.__k)for(i=0;i<_.length;i++)_[i]&&De(_[i],e,n||typeof t.type!="function");n||t.__e==null||ye(t.__e),t.__=t.__e=t.__d=void 0}function Le(t,e,n){return this.constructor(t,n)}function Ue(t,e,n){var _,i,o;h.__&&h.__(t,e),i=(_=typeof n=="function")?null:n&&n.__k||e.__k,o=[],ee(e,t=(!_&&n||e).__k=Re(D,null,[t]),i||j,j,e.ownerSVGElement!==void 0,!_&&n?[n]:i?null:e.firstChild?J.call(e.childNodes):null,o,!_&&n?n:i?i.__e:e.firstChild,_),$e(o,t)}J=ge.slice,h={__e:function(t,e,n,_){for(var i,o,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,_||{}),l=i.__d),l)return i.__E=i}catch(d){t=d}throw t}},be=0,I.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=x({},this.state),typeof t=="function"&&(t=t(x({},n),this.props)),t&&x(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),oe(this))},I.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),oe(this))},I.prototype.render=D,S=[],q.__r=0;var te,C,K,ae,X=0,Pe=[],G=[],ce=h.__b,se=h.__r,ue=h.diffed,de=h.__c,fe=h.unmount;function xe(t,e){h.__h&&h.__h(C,t,X||e),X=0;var n=C.__H||(C.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:G}),n.__[t]}function P(t){return X=1,We(Ee,t)}function We(t,e,n){var _=xe(te++,2);if(_.t=t,!_.__c&&(_.__=[n?n(e):Ee(void 0,e),function(o){var l=_.__N?_.__N[0]:_.__[0],d=_.t(l,o);l!==d&&(_.__N=[d,_.__[1]],_.__c.setState({}))}],_.__c=C,!C.u)){C.u=!0;var i=C.shouldComponentUpdate;C.shouldComponentUpdate=function(o,l,d){if(!_.__c.__H)return!0;var p=_.__c.__H.__.filter(function(r){return r.__c});if(p.every(function(r){return!r.__N}))return!i||i.call(this,o,l,d);var v=!1;return p.forEach(function(r){if(r.__N){var g=r.__[0];r.__=r.__N,r.__N=void 0,g!==r.__[0]&&(v=!0)}}),!(!v&&_.__c.props===o)&&(!i||i.call(this,o,l,d))}}return _.__N||_.__}function Be(t,e){var n=xe(te++,7);return Ge(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function Oe(){for(var t;t=Pe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(V),t.__H.__h.forEach(Y),t.__H.__h=[]}catch(e){t.__H.__h=[],h.__e(e,t.__v)}}h.__b=function(t){C=null,ce&&ce(t)},h.__r=function(t){se&&se(t),te=0;var e=(C=t.__c).__H;e&&(K===C?(e.__h=[],C.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=G,n.__N=n.i=void 0})):(e.__h.forEach(V),e.__h.forEach(Y),e.__h=[])),K=C},h.diffed=function(t){ue&&ue(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Pe.push(e)!==1&&ae===h.requestAnimationFrame||((ae=h.requestAnimationFrame)||Ie)(Oe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==G&&(n.__=n.__V),n.i=void 0,n.__V=G})),K=C=null},h.__c=function(t,e){e.some(function(n){try{n.__h.forEach(V),n.__h=n.__h.filter(function(_){return!_.__||Y(_)})}catch(_){e.some(function(i){i.__h&&(i.__h=[])}),e=[],h.__e(_,n.__v)}}),de&&de(t,e)},h.unmount=function(t){fe&&fe(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(_){try{V(_)}catch(i){e=i}}),n.__H=void 0,e&&h.__e(e,n.__v))};var he=typeof requestAnimationFrame=="function";function Ie(t){var e,n=function(){clearTimeout(_),he&&cancelAnimationFrame(e),setTimeout(t)},_=setTimeout(n,100);he&&(e=requestAnimationFrame(n))}function V(t){var e=C,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),C=e}function Y(t){var e=C;t.__c=t.__(),C=e}function Ge(t,e){return!t||t.length!==e.length||e.some(function(n,_){return n!==t[_]})}function Ee(t,e){return typeof e=="function"?e(t):e}var Ve=0;function s(t,e,n,_,i){var o,l,d={};for(l in e)l=="ref"?o=e[l]:d[l]=e[l];var p={type:t,props:d,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Ve,__source:i,__self:_};if(typeof t=="function"&&(o=t.defaultProps))for(l in o)d[l]===void 0&&(d[l]=o[l]);return h.vnode&&h.vnode(p),p}const U="\u200D",je=["\u{1F471}","\u{1F9D4}","\u{1F64E}","\u{1F926}","\u{1F473}","\u{1F486}","\u{1F9D6}","\u{1F481}","\u{1F647}","\u{1F9DD}"],Me=["\u{1F9D1}","\u{1F468}","\u{1F469}"],qe=["",`${U}\u2642\uFE0F`,`${U}\u2640\uFE0F`],ze=[["\u{1F9D2}","\u{1F466}","\u{1F467}"],["\u{1F9D3}","\u{1F474}","\u{1F475}"],["\u{1FAC5}","\u{1F934}","\u{1F478}"]],pe=["\u{1F3FB}","\u{1F3FC}","\u{1F3FD}","\u{1F3FE}","\u{1F3FF}"],He="\u{1F9B2}",Je=["\u{1F9B0}","\u{1F9B1}","\u{1F9B3}",He],Ke=({skinType:t,genderIndex:e})=>{const n=["x","\u{1F385}","\u{1F936}"];return e===0?`\u{1F9D1}${t}${U}\u{1F384}`:`${n[e]}${t}`},me=[...Je.map(t=>({skinType:e,genderIndex:n})=>`${Me[n]}${e}${U}${t}`),...ze.map(t=>({skinType:e,genderIndex:n})=>`${t[n]}${e}`),...je.map(t=>({skinType:e,genderIndex:n})=>`${t}${e}${qe[n]}`),Ke];function Ze({onSelect:t}){const[e,n]=P(0),_=pe[e],[i,o]=P(0),[l,d]=P(0),p=me[l]({skinType:_,genderIndex:i});return s("div",{children:[s("p",{children:pe.map((v,r)=>s("button",{"data-selected":e===r,onClick:()=>n(r),children:`\u{1F9D1}${v}${U}${He}`},v))}),s("p",{children:Me.map((v,r)=>s("button",{"data-selected":i===r,onClick:()=>o(r),children:`${v}${_}`},v))}),s("p",{class:"characterChooser",children:me.map((v,r)=>s("button",{"data-selected":l===r,onClick:()=>d(r),children:v({skinType:_,genderIndex:i})},r))}),s("p",{children:s("button",{onClick:()=>t(p),children:["Pick ",p]})})]})}function ve({item:t}){const{number:e,target:n}=t;return s(D,{children:[s("svg",{class:"gridTile","data-number":e,viewBox:"0 0 3 3",children:[s("rect",{x:"0",y:"0",width:1,height:1,class:"gridTileWall"}),s("rect",{x:"2",y:"0",width:1,height:1,class:"gridTileWall"}),s("rect",{x:"0",y:"2",width:1,height:1,class:"gridTileWall"}),s("rect",{x:"2",y:"2",width:1,height:1,class:"gridTileWall"}),s("rect",{x:"1",y:"1",width:1,height:1,class:"gridTileFloor"}),s("rect",{x:"0",y:"1",width:1,height:1,class:(e&1)>0?"gridTileWall":"gridTileFloor"}),s("rect",{x:"1",y:"0",width:1,height:1,class:(e&2)>0?"gridTileWall":"gridTileFloor"}),s("rect",{x:"2",y:"1",width:1,height:1,class:(e&4)>0?"gridTileWall":"gridTileFloor"}),s("rect",{x:"1",y:"2",width:1,height:1,class:(e&8)>0?"gridTileWall":"gridTileFloor"})]}),s("div",{class:"girdTarget",children:n})]})}const R=7,N=7,Qe=[[{number:3},{number:3},{number:2,target:"\u{1F48C}"},{number:10},{number:2,target:"\u{1F3C6}"},{number:10},{number:6}],[{number:5},{number:12},{number:1,target:"\u{1F409}"},{number:5},{number:10},{number:2,target:"\u{1F9D9}\u200D\u2642\uFE0F"},{number:5}],[{number:1,target:"\u{1F5FA}"},{number:9},{number:1,target:"\u{1F451}"},{number:9},{number:2,target:"\u{1F3FA}"},{number:5},{number:4,target:"\u{1F9B4}"}],[{number:5},{number:10},{number:9},{number:4,target:"\u{1F9DC}\u200D\u2640\uFE0F"},{number:8,target:"\u{1F9DE}"},{number:12},{number:5}],[{number:1,target:"\u{1F48D}"},{number:9,target:"\u{1F577}"},{number:8,target:"\u{1F9F3}"},{number:12},{number:4,target:"\u{1F48E}"},{number:5},{number:4,target:"\u{1F5E1}"}],[{number:9,target:"\u{1FAB0}"},{number:9},{number:6,target:"\u{1F996}"},{number:1,target:"\u{1F987}"},{number:12,target:"\u{1F401}"},{number:5},{number:12,target:"\u{1F989}"}],[{number:9},{number:8,target:"\u{1F9CC}"},{number:8,target:"\u{1F56F}"},{number:12},{number:8,target:"\u{1F99D}"},{number:10},{number:12}]],Xe={number:6,target:"\u{1FAB2}"},Z=t=>t%2===1,Q=t=>t%2===1,Ye=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1}],et=({x:t,y:e})=>t>=0&&e>=0&&t<R&&e<N,tt=()=>{const[t,e]=P(Xe),[n,_]=P(Qe),[i,o]=P({x:0,y:0,target:"\u{1F3FA}",score:0}),[l,d]=P("grid"),p=()=>{const c=n.flatMap(a=>a.map(F=>F.target)).filter(a=>!!a).filter(a=>a!==i.target);return c[Math.floor(Math.random()*c.length)]},v=Be(()=>{const f=new Set,c=[{x:i.x,y:i.y}];for(;c.length>0;){const a=c.pop();if(a===void 0)throw new Error("Popping from an empty stack!?");const F=`${a.x}-${a.y}`;if(!f.has(F)){f.add(F);const M=n[a.y][a.x].number;Ye.forEach(({x:H,y:W},ne)=>{const B={x:a.x+H,y:a.y+W};(M>>ne&1)===0&&et(B)&&(n[B.y][B.x].number>>(ne+2)%4&1)===0&&c.push(B)})}}return f},[i,n]);return{gridWidth:R,gridHeight:N,isRowMovable:Z,isColMovable:Q,placeable:t,gridData:n,rotatePlaceable:()=>{e(({number:f,target:c})=>({number:f>>1|(f&1)<<3,target:c}))},isPlaceableRotatable:()=>l==="grid",moveColUp:f=>{const c=n[0][f];_(n.map((a,F)=>a.map((M,H)=>H===f?F+1>=n.length?t:n[F+1][H]:M))),e(c),i.x===f&&o(a=>({...a,y:(a.y-1+N)%N})),d("player")},moveColDown:f=>{const c=n.at(-1);if(c===void 0)throw new Error("Trying to take from an empty grid");const a=c[f];_(n.map((F,M)=>F.map((H,W)=>W===f?M===0?t:n[M-1][W]:H))),e(a),i.x===f&&o(F=>({...F,y:(F.y+1)%N})),d("player")},moveRowLeft:f=>{const c=n[f][0];_(n.map((a,F)=>F===f?[...a.slice(1),t]:a)),e(c),i.y===f&&o(a=>({...a,x:(a.x-1+R)%R})),d("player")},moveRowRight:f=>{const c=n[f].at(-1);if(c===void 0)throw new Error("Trying to take from an empty row");_(n.map((a,F)=>F===f?[t,...a.slice(0,-1)]:a)),e(c),i.y===f&&o(a=>({...a,x:(a.x+1)%R})),d("player")},isRowMovableLeft:f=>l==="grid"&&Z(f),isRowMovableRight:f=>l==="grid"&&Z(f),isColMovableUp:f=>l==="grid"&&Q(f),isColMovableDown:f=>l==="grid"&&Q(f),player:i,isPlayerMovableTo:({x:f,y:c})=>l==="player"&&v.has(`${f}-${c}`),movePlayerTo:({x:f,y:c})=>{o(a=>({...a,x:f,y:c})),i.target===n[c][f].target&&o(a=>({...a,score:a.score+1,target:p()})),d("grid")}}};function nt(){const[t,e]=P("\u{1F9D6}\u{1F3FD}"),[n,_]=P(!1),{gridWidth:i,gridHeight:o,isRowMovable:l,isColMovable:d,placeable:p,isPlaceableRotatable:v,gridData:r,rotatePlaceable:g,moveColUp:m,moveColDown:u,moveRowLeft:b,moveRowRight:T,isRowMovableLeft:y,isRowMovableRight:k,isColMovableUp:w,isColMovableDown:E,player:$,isPlayerMovableTo:A,movePlayerTo:f}=tt();return s("div",{class:"layoutGrid",children:[s("div",{children:[s("h1",{children:"emovejimaze"}),n?null:s("p",{children:[s("button",{onClick:()=>_(!0),children:t})," ","\u2192 ",$.target," (",$.score,")"]})]}),n?s("div",{class:"card",children:s(Ze,{onSelect:c=>{e(c),_(!1)}})}):s("div",{class:"grid",style:{gridTemplate:`1fr repeat(${o}, 2fr) 1fr / 1fr repeat(${i}, 2fr) 1fr`},children:[s(D,{children:[s("div",{}),[...Array(i).keys()].map(c=>d(c)?s("button",{onClick:()=>u(c),disabled:!E(c),children:"v"},c):s("div",{},c)),s("div",{})]}),[...Array(o).keys()].map(c=>s(D,{children:[l(c)?s("button",{onClick:()=>T(c),disabled:!k(c),children:">"}):s("div",{}),[...Array(i).keys()].map(a=>s(D,{children:s("div",{style:{position:"relative"},children:[a===0&&c===0?s("button",{class:"placeable",onClick:g,disabled:!v(),children:s(ve,{item:p})}):null,s("button",{disabled:!A({x:a,y:c}),onClick:()=>f({x:a,y:c}),children:[s(ve,{item:r[c][a]}),$.x===a&&$.y===c?s("div",{class:"player",children:t}):null]})]})},`${a}-${c}`)),l(c)?s("button",{onClick:()=>b(c),disabled:!y(c),children:"<"}):s("div",{})]},c)),s(D,{children:[s("div",{}),[...Array(i).keys()].map(c=>d(c)?s("button",{onClick:()=>m(c),disabled:!w(c),children:"\u2227"},c):s("div",{},c)),s("div",{})]})]}),s("footer",{class:"footer",children:s("p",{children:["\xA9 2022 by"," ",s("a",{href:"http://bernhardhaeussner.de/",children:"Bernhard H\xE4ussner"}),", code on"," ",s("a",{href:"https://github.com/bxt/emovejimaze",children:"GitHub"}),"."]})})]})}Ue(s(nt,{}),document.getElementById("app"));
